define("local_message/my_datatables",["exports","core/ajax","jquery","local_message/datatables","core/templates","core/modal_factory","core/modal_events"],(function(_exports,_ajax,_jquery,_datatables,_templates,_modal_factory,_modal_events){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * TODO describe module my_datatables
   *
   * @module     local_message/my_datatables
   * @copyright  2024 LMSCloud.io
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events);const selectors_actions={star:'[data-action="star"]',mymodal:'[data-action="my_modal"]'};_exports.init=()=>{(0,_jquery.default)((function(){(0,_jquery.default)("#viewmsgtable").DataTable({bLengthChange:!1,ordering:!1})})),(0,_jquery.default)((function(){(0,_jquery.default)(".mytable").DataTable({bLengthChange:!1,ordering:!1})})),document.addEventListener("click",(e=>{let starred=e.target.closest(selectors_actions.star);if(starred){var isfav="true"===starred.getAttribute("data-favorited"),id=starred.getAttribute("data-id"),params={};isfav?(params.fav=!1,params.id=id):(params.fav=!0,params.id=id),_ajax.default.call([{methodname:"local_message_favourites",args:params}])[0].done((function(){window.location.reload(!0)})).fail((function(){}))}let mymodal=e.target.closest(selectors_actions.mymodal);if(mymodal){const myObject=mymodal.getAttribute("data-object"),data=JSON.parse(myObject);_modal_factory.default.create({title:"View Messages",body:_templates.default.render("local_message/viewmsg",data)}).done((function(modal){modal.setLarge(),modal.getRoot().on(_modal_events.default.hidden,(function(e){e.preventDefault(),window.location.reload(!0)})),modal.show()}))}}))}}));

//# sourceMappingURL=my_datatables.min.js.map